# app.py
# ---------------------------------------
# ğŸ… ì²´ìœ¡ ì§„ë¡œ ì„±í–¥ ê²€ì‚¬ (ê³ ë“±í•™ìƒ ìˆ˜í–‰í‰ê°€ìš©)
# - 12ë¬¸í•­ Likert(ì „í˜€ì•„ë‹ˆë‹¤~ë§¤ìš°ê·¸ë ‡ë‹¤)
# - 8ê°œ ì„±í–¥ ìœ í˜• ì ìˆ˜í™” â†’ ê²°ê³¼ ë„ì¶œ
# - ìœ í˜•ë³„ 5ê°œ ì§ì—… + ì§§ì€ ì„¤ëª… ì œê³µ
# - ê²°ê³¼ ì €ì¥/ë‹¤ìš´ë¡œë“œ, ë°œí‘œìš© ì†Œê°œë¬¸ ë‚´ì¥
# ---------------------------------------

import streamlit as st
from collections import defaultdict
import json
from datetime import datetime

st.set_page_config(page_title="ì²´ìœ¡ ì§„ë¡œ ì„±í–¥ ê²€ì‚¬", page_icon="ğŸ…", layout="centered")

# ---------- ë°ì´í„°: ìœ í˜• ì„¤ëª… & ì§ì—… ----------
TYPE_INFO = {
    "ë¦¬ë”í˜•": {
        "desc": "ë‹¤ë¥¸ ì‚¬ëŒì„ ì§€ë„í•˜ê³  íŒ€ì„ ì´ë„ëŠ” ë° ê°•ì ì´ ìˆì–´ìš”. ê³µë™ ëª©í‘œë¥¼ í–¥í•´ êµ¬ì„±ì›ì„ ëª¨ìœ¼ê³  ì„±ì¥ì‹œí‚¤ëŠ” ì¬ëŠ¥ì´ í½ë‹ˆë‹¤.",
        "jobs": [
            ("ì²´ìœ¡ êµì‚¬", "í•™êµì—ì„œ ì²´ìœ¡ ìˆ˜ì—…ì„ ë‹´ë‹¹í•˜ë©° ê±´ê°•Â·ì²´ë ¥ ë°œë‹¬ì„ ì§€ë„."),
            ("ìŠ¤í¬ì¸  ì½”ì¹˜", "ì¢…ëª©ë³„ ê¸°ìˆ Â·ì „ìˆ  í›ˆë ¨ì„ ì„¤ê³„í•˜ê³  ì„ ìˆ˜ ì—­ëŸ‰ì„ ë†’ì„."),
            ("ê°ë…", "íŒ€ ìš´ì˜ê³¼ ê²½ê¸° ì „ëµ ìˆ˜ë¦½ì„ ì´ê´„í•˜ëŠ” ì§€ë„ì."),
            ("ìŠ¤í¬ì¸  í–‰ì •ê°€", "ì²´ìœ¡íšŒÂ·ì˜¬ë¦¼í”½ ì¡°ì§ìœ„ ë“±ì—ì„œ ì •ì±…Â·ëŒ€íšŒë¥¼ ê¸°íšÂ·ìš´ì˜."),
            ("ë ˆí¬ë¦¬ì—ì´ì…˜ ì§€ë„ì", "ìº í”„Â·ì§€ì—­ì‚¬íšŒì—ì„œ ì²´ìœ¡ í™œë™ê³¼ ë†€ì´ë¥¼ ì§€ë„.")
        ],
        "emoji": "ğŸ†",
    },
    "ë„ì „í˜•": {
        "desc": "í•œê³„ë¥¼ ë„˜ì–´ ê¸°ë¡ê³¼ ì„±ì·¨ë¥¼ ì¶”êµ¬í•´ìš”. ì••ë°• ìƒí™©ì—ì„œë„ ì§‘ì¤‘ë ¥ì„ ìœ ì§€í•˜ë©° ë„ì „ì„ ì¦ê¹ë‹ˆë‹¤.",
        "jobs": [
            ("í”„ë¡œ ì„ ìˆ˜", "íŠ¹ì • ì¢…ëª©ì—ì„œ ìµœê³  ê¸°ë¡ê³¼ ìŠ¹ë¦¬ë¥¼ ëª©í‘œë¡œ ê²½ìŸ."),
            ("ëª¨í—˜ ìŠ¤í¬ì¸  ì„ ìˆ˜", "í´ë¼ì´ë°Â·ì„œí•‘ ë“± ê³ ë‚œë„ ìµìŠ¤íŠ¸ë¦¼ ì¢…ëª©ì— ë„ì „."),
            ("eìŠ¤í¬ì¸  ì„ ìˆ˜", "ê²Œì„ì„ ìŠ¤í¬ì¸ ì²˜ëŸ¼ í›ˆë ¨í•´ ëŒ€íšŒì—ì„œ ê²½ìŸ."),
            ("êµ° íŠ¹ìˆ˜ì²´ë ¥ êµê´€", "íŠ¹ìˆ˜ë¶€ëŒ€ ì²´ë ¥Â·ì •ì‹ ë ¥ ë‹¨ë ¨ í›ˆë ¨ ì§€ë„."),
            ("ìŠ¤í„´íŠ¸ í¼í¬ë¨¸", "ì˜ìƒë¬¼ì—ì„œ ìœ„í—˜í•œ ì•¡ì…˜ ì¥ë©´ì„ ì „ë¬¸ì ìœ¼ë¡œ ìˆ˜í–‰.")
        ],
        "emoji": "ğŸ”¥",
    },
    "ì—°êµ¬í˜•": {
        "desc": "ê³¼í•™ì  ê·¼ê±°ë¡œ ìš´ë™ì„ í•´ì„í•˜ê³  ë°ì´í„°ë¥¼ í†µí•´ ê°œì„ ì ì„ ì°¾ëŠ” ê±¸ ì„ í˜¸í•´ìš”.",
        "jobs": [
            ("ìŠ¤í¬ì¸  ê³¼í•™ì", "ìš´ë™ íš¨ê³¼Â·ì‹ ì²´ ë³€í™”ë¥¼ ì—°êµ¬í•´ ê²½ê¸°ë ¥ í–¥ìƒ ì§€ì›."),
            ("ìš´ë™ì²˜ë°©ì‚¬", "ê±´ê°• ìƒíƒœì— ë§ì¶˜ ë§ì¶¤í˜• ìš´ë™ í”„ë¡œê·¸ë¨ ì„¤ê³„."),
            ("ìŠ¤í¬ì¸  ë°ì´í„° ë¶„ì„ê°€", "ê²½ê¸° ê¸°ë¡ ë¶„ì„ìœ¼ë¡œ ì „ëµÂ·ì„ ìˆ˜ ê´€ë¦¬ì— ê¸°ì—¬."),
            ("ë°”ì´ì˜¤ë©”ì¹´ë‹‰ ì—°êµ¬ì›", "ë™ì‘Â·ê·¼ìœ¡ ì›€ì§ì„ ë“± ìš´ë™ì—­í•™ì„ ë¶„ì„."),
            ("ìŠ¤í¬ì¸  ê³µí•™ì", "ì‹ ì†Œì¬Â·ì„¼ì„œ ë“±ìœ¼ë¡œ ì¥ë¹„Â·í›ˆë ¨ ë„êµ¬ë¥¼ ê°œë°œ.")
        ],
        "emoji": "ğŸ”¬",
    },
    "ì†Œí†µí˜•": {
        "desc": "ì‚¬ëŒì„ ë•ê³  ê´€ê³„ë¥¼ ë§Œë“œëŠ” ë° ê°•ì ì´ ìˆì–´ìš”. ê³µê°ê³¼ ì˜ì‚¬ì†Œí†µì´ ì¤‘ìš”í•œ ì—­í• ì— ì˜ ë§ìŠµë‹ˆë‹¤.",
        "jobs": [
            ("ìƒí™œì²´ìœ¡ ì§€ë„ì", "ì§€ì—­ì‚¬íšŒ ëŒ€ìƒ ì²´ìœ¡ í™œë™ ì§€ë„ ë° í”„ë¡œê·¸ë¨ ìš´ì˜."),
            ("ìŠ¤í¬ì¸  ì‹¬ë¦¬ìƒë‹´ì‚¬", "ë¶ˆì•ˆÂ·ì••ë°• ê´€ë¦¬, ìì‹ ê° íšŒë³µì„ ë•ëŠ” ì‹¬ë¦¬ ì§€ì›."),
            ("ìš´ë™ì¬í™œ ì¹˜ë£Œì‚¬", "ë¶€ìƒÂ·ì§ˆí™˜ íšŒë³µì„ ìœ„í•œ ì¬í™œ ìš´ë™ ì§€ë„."),
            ("ì¬í™œê³µí•™ ì „ë¬¸ê°€", "ë³´ì¡°Â·ìš´ë™ê¸°êµ¬ ì„¤ê³„ë¡œ ìš´ë™ ê¸°ëŠ¥ íšŒë³µ ì§€ì›."),
            ("ìŠ¤í¬ì¸  ì‚¬íšŒë³µì§€ì‚¬", "ì¥ì• ì¸Â·ë…¸ì¸Â·ì²­ì†Œë…„ ìŠ¤í¬ì¸  ì°¸ì—¬ì™€ ì‚¶ì˜ ì§ˆ í–¥ìƒ ì§€ì›.")
        ],
        "emoji": "ğŸ¤",
    },
    "ê²½ìŸí˜•": {
        "desc": "ê·œì¹™ê³¼ ê³µì •ì„±, ìŠ¹ë¶€ì˜ ê¸´ì¥ì„ ì¦ê¹ë‹ˆë‹¤. ë¹ ë¥¸ íŒë‹¨ê³¼ ì±…ì„ê°ì„ ìš”êµ¬í•˜ëŠ” ì—­í• ì— ì í•©í•´ìš”.",
        "jobs": [
            ("ê²½ê¸° ì‹¬íŒ", "ê·œì¹™ ì ìš©ê³¼ ê³µì •í•œ íŒì •ìœ¼ë¡œ ê²½ê¸° ìš´ì˜."),
            ("ì„ ìˆ˜ ìŠ¤ì¹´ìš°í„°", "ìœ ë§ì£¼ ë°œêµ´Â·í‰ê°€ë¡œ íŒ€ ì „ë ¥ ê°•í™”ì— ê¸°ì—¬."),
            ("ìŠ¤í¬ì¸  ì—ì´ì „íŠ¸", "ì„ ìˆ˜ ê³„ì•½Â·í˜‘ìƒÂ·ë¸Œëœë”©ì„ ì¢…í•© ê´€ë¦¬."),
            ("ë„í•‘ ê²€ì‚¬ê´€", "ë¶ˆë²• ì•½ë¬¼ ì‚¬ìš© ì—¬ë¶€ë¥¼ ê²€ì‚¬í•´ ê³µì •ì„± ìˆ˜í˜¸."),
            ("ê²½ê¸° ìš´ì˜ ë§¤ë‹ˆì €", "í”„ë¡œíŒ€Â·ëŒ€íšŒì˜ ìš´ì˜Â·ì¼ì •Â·í˜„ì¥ ê´€ë¦¬ë¥¼ ì´ê´„.")
        ],
        "emoji": "âš–ï¸",
    },
    "ê±´ê°•ê´€ë¦¬í˜•": {
        "desc": "ì²´ë ¥Â·íšŒë³µÂ·ì˜ì–‘ ë“± ê±´ê°• ì „ë°˜ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ë° ê´€ì‹¬ì´ ë§ì•„ìš”.",
        "jobs": [
            ("í”¼íŠ¸ë‹ˆìŠ¤ íŠ¸ë ˆì´ë„ˆ", "ê°œì¸ ë§ì¶¤ ìš´ë™ ì§€ë„ì™€ ì²´ë ¥ í–¥ìƒ ì§€ì›."),
            ("ìš´ë™ ì¬í™œì‚¬", "ë¶€ìƒ í›„ ì¦ìƒÂ·ë‹¨ê³„ë³„ ì¬í™œ ìš´ë™ ì œê³µ."),
            ("ìŠ¤í¬ì¸  ì˜ì–‘ ì½”ì¹˜", "ì¢…ëª©Â·í¬ì§€ì…˜ ë§ì¶¤ ì‹ë‹¨Â·ì˜ì–‘ ì „ëµ ì„¤ê³„."),
            ("ìš´ë™ìƒë¦¬í•™ì", "ì‹¬íÂ·ëŒ€ì‚¬ ë“± ìƒë¦¬ ë°˜ì‘ì„ ì—°êµ¬Â·ì¸¡ì •."),
            ("ìŠ¤í¬ì¸  í…Œë¼í”¼ìŠ¤íŠ¸", "ë§ˆì‚¬ì§€Â·ë¬¼ë¦¬ì¹˜ë£Œë¡œ í”¼ë¡œ íšŒë³µÂ·ë¶€ìƒ ì˜ˆë°©.")
        ],
        "emoji": "ğŸƒ",
    },
    "ì°½ì˜í˜•": {
        "desc": "ìƒˆë¡œìš´ ì‹œë„ì™€ ê¸°íšÂ·ì½˜í…ì¸  ì œì‘ì— í¥ë¯¸ê°€ ì»¤ìš”. ìŠ¤í† ë¦¬í…”ë§ê³¼ ê°ê°ì„ ì‚´ë¦¬ëŠ” ì—­í• ì´ ì–´ìš¸ë¦½ë‹ˆë‹¤.",
        "jobs": [
            ("ìŠ¤í¬ì¸  ì½˜í…ì¸  ì œì‘ì", "ì˜ìƒÂ·ê¸°ì‚¬ ë“±ìœ¼ë¡œ ìŠ¤í¬ì¸  ì´ìŠˆë¥¼ ì œì‘Â·ì „ë‹¬."),
            ("ìŠ¤í¬ì¸  ê²Œì„ ê°œë°œì", "ì¶•êµ¬Â·ë†êµ¬ ë“± ìŠ¤í¬ì¸  ê²Œì„ ê¸°íšÂ·ê°œë°œ."),
            ("ì´ë²¤íŠ¸ í”Œë˜ë„ˆ", "ë§ˆë¼í†¤Â·ì² ì¸3ì¢… ë“± ëŒ€íšŒ ê¸°íšÂ·ìš´ì˜."),
            ("ìŠ¤í¬ì¸  íŒ¨ì…˜ ë””ìì´ë„ˆ", "ê¸°ëŠ¥ì„±ê³¼ ë””ìì¸ì„ ê²¸ë¹„í•œ ì˜ë¥˜Â·ì‹ ë°œ ì„¤ê³„."),
            ("ìŠ¤í¬ì¸  ì‚¬ì§„Â·ì˜ìƒ ì „ë¬¸ê°€", "ê²½ê¸° ì´¬ì˜Â·í•˜ì´ë¼ì´íŠ¸Â·ë¶„ì„ ì˜ìƒ ì œì‘.")
        ],
        "emoji": "ğŸ¨",
    },
    "ê¸°ìˆ í˜•": {
        "desc": "ì¥ë¹„Â·ì„¼ì„œÂ·ì†Œí”„íŠ¸ì›¨ì–´ ë“± ê¸°ìˆ ì„ ìš´ë™ì— ì ‘ëª©í•˜ëŠ” ê±¸ ì¢‹ì•„í•©ë‹ˆë‹¤.",
        "jobs": [
            ("ìŠ¤í¬ì¸  ì¥ë¹„ ê°œë°œì", "ë¼ì¼“Â·ì‹ ë°œÂ·ë³´í˜¸ì¥ë¹„ ì„±ëŠ¥ ì„¤ê³„Â·ê°œì„ ."),
            ("ìš´ë™ ì˜í•™ ì—°êµ¬ì›", "ìš´ë™ê³¼ ì˜í•™ì„ ì ‘ëª©í•œ ì˜ˆë°©Â·ì¹˜ë£Œ ì—°êµ¬."),
            ("ìŠ¤í¬ì¸  IoT ì „ë¬¸ê°€", "ì›¨ì–´ëŸ¬ë¸”Â·íŠ¸ë˜í‚¹ ë“± ì„¼ì„œ ì‹œìŠ¤í…œ ê°œë°œ."),
            ("ë“œë¡ Â·ì˜ìƒ íŒë… ì „ë¬¸ê°€", "ì¤‘ê³„Â·íŒì • ë³´ì¡°ë¥¼ ìœ„í•œ ì˜ìƒÂ·ë“œë¡  ìš´ìš©."),
            ("ìŠ¤í¬ì¸  ì‹œì„¤ ê´€ë¦¬ì", "ê²½ê¸°ì¥Â·í›ˆë ¨ì„¼í„°ì˜ ì•ˆì „Â·ìš´ì˜Â·ìœ ì§€ë³´ìˆ˜ ì´ê´„.")
        ],
        "emoji": "âš™ï¸",
    },
}

TYPES = list(TYPE_INFO.keys())

# ---------- ì„¤ë¬¸ ë¬¸í•­ (12ê°œ) ----------
# ê° ë¬¸í•­ì€ ê´€ë ¨ ìœ í˜•ì— ê°€ì¤‘ì¹˜ë¥¼ ê°–ìŠµë‹ˆë‹¤. (í•œ ë¬¸í•­ì´ ì—¬ëŸ¬ ìœ í˜•ì— ê¸°ì—¬ ê°€ëŠ¥)
QUESTIONS = [
    ("ë‚˜ëŠ” íŒ€ì›Œí¬ê°€ ì¤‘ìš”í•œ í™œë™ì„ ì„ í˜¸í•œë‹¤.", {"ë¦¬ë”í˜•": 1, "ì†Œí†µí˜•": 1}),
    ("ë‚˜ëŠ” ìŠ¤ìŠ¤ë¡œ ê¸°ë¡ì„ ì„¸ìš°ê±°ë‚˜ ë­í‚¹ì„ ì˜¬ë¦¬ëŠ” ê²ƒì— í° ë™ê¸°ë¶€ì—¬ë¥¼ ëŠë‚€ë‹¤.", {"ë„ì „í˜•": 1, "ê²½ìŸí˜•": 1}),
    ("ë‚˜ëŠ” ì¹œêµ¬ë‚˜ í›„ë°°ë¥¼ ê°€ë¥´ì¹˜ê³  ì§€ë„í•˜ëŠ” ì¼ì´ ì¦ê²ë‹¤.", {"ë¦¬ë”í˜•": 1, "ì†Œí†µí˜•": 1}),
    ("ë‚˜ëŠ” ê²½ê¸° ë°ì´í„°ë¥¼ ë³´ê±°ë‚˜ ë¶„ì„í•˜ëŠ” í™œë™ì´ ì¬ë¯¸ìˆë‹¤.", {"ì—°êµ¬í˜•": 1, "ê²½ìŸí˜•": 1}),
    ("ìƒˆë¡œìš´ í›ˆë ¨ë²•Â·ì „ìˆ ì„ ì—°êµ¬í•˜ê³  ì ìš©í•´ë³´ëŠ” ê±¸ ì¢‹ì•„í•œë‹¤.", {"ì—°êµ¬í˜•": 1, "ì°½ì˜í˜•": 1}),
    ("ìœ„í—˜í•˜ê±°ë‚˜ í˜ë“  ìš´ë™ì—ë„ ë„ì „í•´ë³´ê³  ì‹¶ë‹¤.", {"ë„ì „í˜•": 1}),
    ("ìš´ë™ í›„ íšŒë³µÂ·ì˜ì–‘Â·ìˆ˜ë©´ ê´€ë¦¬ì— ê´€ì‹¬ì´ ë§ë‹¤.", {"ê±´ê°•ê´€ë¦¬í˜•": 1}),
    ("ì‚¬ëŒë“¤ê³¼ ì‰½ê²Œ ì–´ìš¸ë¦¬ê³  ë¶„ìœ„ê¸°ë¥¼ ë„ìš°ëŠ” í¸ì´ë‹¤.", {"ì†Œí†µí˜•": 1, "ë¦¬ë”í˜•": 1}),
    ("ê³µì •í•œ íŒì •ê³¼ ê·œì¹™ ì¤€ìˆ˜ê°€ ë¬´ì—‡ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.", {"ê²½ìŸí˜•": 1}),
    ("ìŠ¤í¬ì¸  ì¥ë¹„Â·ì›¨ì–´ëŸ¬ë¸” ê°™ì€ ê¸°ìˆ ì´ ì„±ëŠ¥ í–¥ìƒì— í¬ê²Œ ë„ì›€ì´ ëœë‹¤ê³  ë³¸ë‹¤.", {"ê¸°ìˆ í˜•": 1, "ì—°êµ¬í˜•": 1}),
    ("ìƒˆë¡œìš´ ì½˜í…ì¸ ë‚˜ ì´ë²¤íŠ¸ë¥¼ ê¸°íší•˜ê³  ë§Œë“¤ì–´ë³´ëŠ” ê²Œ ì¦ê²ë‹¤.", {"ì°½ì˜í˜•": 1}),
    ("ì‹œì„¤Â·ì•ˆì „Â·ì¥ë¹„ ê°™ì€ ë³´ì´ì§€ ì•ŠëŠ” ìš´ì˜ì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.", {"ê¸°ìˆ í˜•": 1, "ê²½ìŸí˜•": 1}),
]

LIKERT = ["ì „í˜€ ì•„ë‹ˆë‹¤", "ì•„ë‹ˆë‹¤", "ë³´í†µì´ë‹¤", "ê·¸ë ‡ë‹¤", "ë§¤ìš° ê·¸ë ‡ë‹¤"]
LIKERT_SCORE = {label: i for i, label in enumerate(LIKERT)}  # 0~4ì 

# ---------- ì‚¬ì´ë“œë°” ----------
with st.sidebar:
    st.markdown("## ğŸ“˜ ì•± ì†Œê°œ")
    st.write(
        "ì´ ì•±ì€ **ì²´ìœ¡ í™œë™ì—ì„œ ë“œëŸ¬ë‚˜ëŠ” ê°œì¸ ì„±í–¥**ì„ 12ê°œ ë¬¸í•­ìœ¼ë¡œ ì¸¡ì •í•˜ê³ , "
        "**8ê°€ì§€ ìœ í˜•** ì¤‘ ë‚˜ì™€ ë§ëŠ” ìœ í˜•ì„ ì°¾ì•„ ê´€ë ¨ **ì§ì—… 5ê°œ**ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.\n\n"
        "ìˆ˜í–‰í‰ê°€ ë°œí‘œ ì˜ˆì‹œ: *â€œì €ëŠ” ì„¤ë¬¸ ê²°ê³¼ â€˜ì—°êµ¬í˜•â€™ ì„±í–¥ì´ ë†’ê²Œ ë‚˜ì™”ê³ , "
        "ê´€ë ¨ ì§ì—…ìœ¼ë¡œ â€˜ìŠ¤í¬ì¸  ë°ì´í„° ë¶„ì„ê°€â€™ì™€ â€˜ìŠ¤í¬ì¸  ê³µí•™ìâ€™ë¥¼ íƒìƒ‰í–ˆìŠµë‹ˆë‹¤.â€*"
    )
    st.markdown("---")
    st.caption("ì œì‘: ì²´ìœ¡ ì§„ë¡œ ì„±í–¥ ê²€ì‚¬ Â· Streamlit")

st.title("ğŸ… ì²´ìœ¡ ì§„ë¡œ ì„±í–¥ ê²€ì‚¬")
st.markdown("ê°„ë‹¨í•œ 12ë¬¸í•­ì— ì‘ë‹µí•˜ë©´, ë‹¹ì‹ ì—ê²Œ ë§ëŠ” **ì²´ìœ¡ ì§„ë¡œ ì„±í–¥**ê³¼ **ì§ì—… 5ê°œ**ë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”!")

# ---------- ì„¤ë¬¸ UI ----------
st.markdown("### ğŸ“‹ ì„¤ë¬¸ì— ì‘ë‹µí•´ì£¼ì„¸ìš”")
responses = []
for idx, (q, _) in enumerate(QUESTIONS, start=1):
    sel = st.radio(f"{idx}. {q}", LIKERT, index=2, key=f"q{idx}", horizontal=True)
    responses.append(sel)

st.markdown("---")
if st.button("ê²°ê³¼ ë³´ê¸°"):
    # ì ìˆ˜ ê³„ì‚°
    type_scores = defaultdict(int)
    for (q, weights), resp in zip(QUESTIONS, responses):
        score = LIKERT_SCORE[resp]  # 0~4
        for t, w in weights.items():
            type_scores[t] += score * w

    # ì •ë ¬ ë° ìƒìœ„ 1~3 ìœ í˜•
    ranked = sorted(type_scores.items(), key=lambda x: (-x[1], TYPES.index(x[0])))
    top_type, top_score = ranked[0]
    second = ranked[1] if len(ranked) > 1 else None
    third = ranked[2] if len(ranked) > 2 else None

    # ê²°ê³¼ í‘œì‹œ
    st.success(f"ê²°ê³¼ê°€ ë‚˜ì™”ì–´ìš”! ê°€ì¥ ë†’ì€ ì„±í–¥ì€ **{TYPE_INFO[top_type]['emoji']} {top_type}** ì…ë‹ˆë‹¤.")
    cols = st.columns(3)
    cols[0].metric("1ìœ„", f"{top_type}", f"{top_score}ì ")
    if second:
        cols[1].metric("2ìœ„", f"{second[0]}", f"{second[1]}ì ")
    if third:
        cols[2].metric("3ìœ„", f"{third[0]}", f"{third[1]}ì ")

    st.markdown("### ğŸ” ë‹¹ì‹ ì˜ ì£¼ìš” ì„±í–¥")
    st.write(f"**{TYPE_INFO[top_type]['emoji']} {top_type}** â€” {TYPE_INFO[top_type]['desc']}")

    st.markdown("### ğŸ’¼ ì¶”ì²œ ì§ì—… (5ê°œ) & ì„¤ëª…")
    for name, desc in TYPE_INFO[top_type]["jobs"]:
        st.markdown(f"- **{name}** â€” {desc}")

    with st.expander("ğŸ“š ëª¨ë“  ìœ í˜•ë³„ ì§ì—… ë³´ê¸° (ë°œí‘œÂ·íƒìƒ‰ìš©)"):
        for t in TYPES:
            st.markdown(f"#### {TYPE_INFO[t]['emoji']} {t}")
            st.write(TYPE_INFO[t]["desc"])
            for name, desc in TYPE_INFO[t]["jobs"]:
                st.markdown(f"- **{name}** â€” {desc}")
            st.markdown("---")

    # ì ìˆ˜ í‘œ ì¶œë ¥
    st.markdown("### ğŸ“ˆ ìœ í˜•ë³„ ì ìˆ˜")
    score_cols = st.columns(4)
    for i, t in enumerate(TYPES):
        with score_cols[i % 4]:
            st.metric(t, f"{type_scores[t]}ì ")

    # ê²°ê³¼ ì €ì¥/ë‹¤ìš´ë¡œë“œ
    result_payload = {
        "timestamp": datetime.now().strftime("%Y-%m-%d %H:%M"),
        "scores": dict(type_scores),
        "ranked": ranked,
        "top_type": top_type,
        "top_desc": TYPE_INFO[top_type]["desc"],
        "top_jobs": TYPE_INFO[top_type]["jobs"],
        "answers": {f"Q{i+1}": r for i, r in enumerate(responses)},
    }
    result_text_lines = [
        "ì²´ìœ¡ ì§„ë¡œ ì„±í–¥ ê²€ì‚¬ ê²°ê³¼",
        f"- ìƒì„± ì‹œê°: {result_payload['timestamp']}",
        f"- 1ìœ„ ì„±í–¥: {top_type} ({top_score}ì )",
    ]
    if second:
        result_text_lines.append(f"- 2ìœ„ ì„±í–¥: {second[0]} ({second[1]}ì )")
    if third:
        result_text_lines.append(f"- 3ìœ„ ì„±í–¥: {third[0]} ({third[1]}ì )")
    result_text_lines.append("\n[ì¶”ì²œ ì§ì—… 5ê°œ]")
    for name, desc in TYPE_INFO[top_type]["jobs"]:
        result_text_lines.append(f"- {name}: {desc}")
    result_text_lines.append("\n[ìœ í˜•ë³„ ì ìˆ˜]")
    for t, s in ranked:
        result_text_lines.append(f"- {t}: {s}ì ")
    result_text = "\n".join(result_text_lines)

    st.download_button(
        label="ğŸ“¥ ê²°ê³¼ í…ìŠ¤íŠ¸ ë‹¤ìš´ë¡œë“œ",
        data=result_text.encode("utf-8"),
        file_name="ì²´ìœ¡_ì§„ë¡œ_ì„±í–¥_ê²°ê³¼.txt",
        mime="text/plain",
    )

    st.info(
        "ë°œí‘œ íŒ: ìƒìœ„ 1~2ê°œ ì„±í–¥ê³¼ ê´€ì‹¬ ì§ì—… 1ê°€ì§€ë¥¼ ê³¨ë¼ **ì´ìœ (ë¬¸í•­ ê·¼ê±°)**ë¥¼ ì—°ê²°í•´ì„œ ë§í•˜ë©´ ì„¤ë“ë ¥ì´ ì»¤ì§‘ë‹ˆë‹¤. "
        "ì˜ˆ) â€œë°ì´í„° ë¶„ì„ ë¬¸í•­ì— â€˜ë§¤ìš° ê·¸ë ‡ë‹¤â€™ë¥¼ ì„ íƒí•´ì„œ ì—°êµ¬í˜• ì ìˆ˜ê°€ ë†’ê²Œ ë‚˜ì™”ê³ , ê·¸ë˜ì„œ ìŠ¤í¬ì¸  ë°ì´í„° ë¶„ì„ê°€ì— ê´€ì‹¬ì´ ìƒê²¼ìŠµë‹ˆë‹¤.â€"
    )
else:
    st.caption("ì•„ë˜ â€˜ê²°ê³¼ ë³´ê¸°â€™ë¥¼ ëˆ„ë¥´ë©´ ë‹¹ì‹ ì˜ ì„±í–¥ ê²°ê³¼ì™€ ì§ì—… ì¶”ì²œì´ í‘œì‹œë©ë‹ˆë‹¤.")
